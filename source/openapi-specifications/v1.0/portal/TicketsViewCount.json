{
  "openapi": "3.1.0",
  "info": {
    "title": "Ticket Count API",
    "version": "1.0.0"
  },
  "paths": {
    "/portal/api/tickets/count": {
      "get": {
        "operationId": "getTicketsViewCount",
        "tags": [
          "TicketsViewCount"
        ],
        "summary": "Get ticket view count",
        "description": "Returns count of tickets for a given view with optional department and filter applied.",
        "parameters": [
          {
            "name": "viewId",
            "in": "query",
            "description": "View Id that is accessed now",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            }
          },
            {
            "name": "departmentId",
            "in": "query",
            "description": "ID of the department from which the entity count must be fetched; if not passed then searches in permitted departments",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "pattern": "([0-9]+)",
              "x-custom-parameters-attributes": {
                "split": ","
              }
            }
          },
          {
            "name": "filter",
            "in": "query",
            "required": false,
            "schema": {
              "type": [
                "string",
                "null"
              ],
              "minLength": 0,
              "maxLength": 100,
              "pattern": "\\{(.*)\\}",
              "x-custom-parameters-attributes": {
               
                "criteria": {
                  "fieldConditions": [
                    {
                      "field": {
                        "removeExif": false,
                        "filterMatchedContent": false,
                        "antivirus": false,
                        "replacementString": "",
                        "allowInvalid": false,
                        "descrption": "APIName of the fields",
                        "secret": false,
                        "preserveCharsLimit": 10,
                        "trim": false,
                        "internalParam": false,
                        "preserveChars": "0,5",
                        "importUrl": false,
                        "decrypt": false
                      },
                      "data": [
                        {}
                      ],
                      "con": {
                        "removeExif": false,
                        "filterMatchedContent": false,
                        "antivirus": false,
                        "replacementString": "",
                        "allowInvalid": false,
                        "descrption": "Condition for the Filter",
                        "secret": false,
                        "preserveCharsLimit": 10,
                        "trim": false,
                        "internalParam": false,
                        "preserveChars": "0,5",
                        "importUrl": false,
                        "decrypt": false
                      }
                    }
                  ]
                }
              }
            }
          },
          {
            "$ref": "../common/Common.json#/components/parameters/portalId"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/ticketsViewCountResponse"
          },
          "422": {
            "$ref": "../common/Common.json#/components/responses/unprocessableEntityErrorResponse"
          }
        },
        "security": [
          {
            "jwt-oauth": [
              "jwt-oauth"
            ]
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "TicketsViewCount": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "count"
        ],
        "properties": {
          "count": {
            "type": ["integer","string"],
            "pattern": "([0-9]+)",
            "description": "Total ticket count matching criteria"
          }
        }
      }
    },
    "responses": {
      "ticketsViewCountResponse": {
        "description": "ticketsViewCountResponse template definitions",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/TicketsViewCount"
            },
            "examples": {
              "Valid responses Definitions": {
                "value": {
                  "count": 6
                }
              }
            }
          }
        },
        "x-custom-response-attributes": {
          "disable-safe-headers": "[]"
        }
      }
    },
    "securitySchemes": {
      "cookie-auth": {
        "$ref": "../common/Common.json#/components/securitySchemes/cookie-auth"
      },
      "org-oauth": {
        "$ref": "../common/Common.json#/components/securitySchemes/org-oauth"
      },
      "jwt-oauth": {
        "$ref": "../common/Common.json#/components/securitySchemes/jwt-oauth"
      },
      "iam-oauth2-schema": {
        "$ref": "../common/Common.json#/components/securitySchemes/iam-oauth2-schema"
      }
    }
  },
  "x-entity": "TicketsViewCount"
}
