{
  "openapi": "3.1.0",
  "info": {
    "title": "AbuseAdminTool API",
    "version": "1.0.0",
    "description": "API specification for AbuseAdminTool endpoints: portal info, license info, and org user info."
  },
  "paths": {
    "/api/admin/portalInfo": {
      "get": {
      	"tags" : [ "Admin" ],
        "summary": "Get portal information by key/value",
        "description": "Retrieve portal information based on specified key and value parameters.",
        "operationId": "getPortalInfo",
        "parameters": [
          {
            "$ref": "#/components/parameters/portalInfoKey"
          },
          {
            "$ref": "#/components/parameters/portalInfoValue"
          },
          {
             "$ref": "#/components/parameters/from"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/portalInfoResponse"
          }
        },
        "security" : [ {
          "cookie-auth" : [ "cookie-auth" ]
        } ],
        "x-custom-url-attribute": {
          "security": {
            "throttle": {
              "inline": [
                {
                  "scope": "APPSERVER",
                  "rules": [
                    {
                      "duration": 60000,
                      "lock-period": 60000,
                      "threshold": 60,
                      "hip": false
                    },
                    {
                      "duration": 3600000,
                      "lock-period": 600000,
                      "threshold": 200,
                      "hip": false
                    }
                  ],
                  "window": "ROLLING",
                  "key": "url.path+user.zuid"
                }
              ]
            },
            "extraparams": {
              "disable": true,
              "ignore": false
            },
            "authentication": {},
            "roles": "AbuseAdmin",
            "allow-access-for": "devops"
          },
          "clan-group": "admin",
          "module-group": "admin",
          "apimethod": "com.zoho.desk.security.AbuseAdmin.AbuseAdminToolService.getPortalInfo"
        }
      }
    },
    "/api/admin/licenseInfo": {
      "get": {
      	"tags" : [ "Admin" ],
        "summary": "Get license information",
        "description": "Retrieve license information for the organization.",
        "operationId": "getLicenseInfo",
        "parameters": [
          {
            "$ref": "#/components/parameters/zgid"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/LicenseInfoResponse"
          }
        },
        "security" : [ {
          "cookie-auth" : [ "cookie-auth" ]
        } ],
        "x-custom-url-attribute": {
          "security": {
            "throttle": {
              "inline": [
                {
                  "scope": "APPSERVER",
                  "rules": [
                    {
                      "duration": 60000,
                      "lock-period": 60000,
                      "threshold": 60,
                      "hip": false
                    },
                    {
                      "duration": 3600000,
                      "lock-period": 600000,
                      "threshold": 200,
                      "hip": false
                    }
                  ],
                  "window": "ROLLING",
                  "key": "url.path+user.zuid"
                }
              ]
            },
            "extraparams": {
              "disable": true,
              "ignore": false
            },
            "authentication": {},
            "roles": "AbuseAdmin",
            "allow-access-for": "devops"
          },
          "clan-group": "admin",
          "module-group": "admin",
          "apimethod": "com.zoho.desk.security.AbuseAdmin.AbuseAdminToolService.getLicenseInfo"
        }
      }
    },
    "/api/admin/orgUsers": {
      "get": {
      	"tags" : [ "Admin" ],
        "summary": "Get organization user information",
        "description": "Retrieve user information for the organization.",
        "operationId": "getOrgUserInfo",
        "parameters": [
          {
            "$ref": "#/components/parameters/zgid"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/getOrgUserInfoResponse"
          }
        },
        "security" : [ {
          "cookie-auth" : [ "cookie-auth" ]
        } ],
        "x-custom-url-attribute": {
          "security": {
            "throttle": {
              "inline": [
                {
                  "scope": "APPSERVER",
                  "rules": [
                    {
                      "duration": 60000,
                      "lock-period": 60000,
                      "threshold": 60,
                      "hip": false
                    },
                    {
                      "duration": 3600000,
                      "lock-period": 600000,
                      "threshold": 200,
                      "hip": false
                    }
                  ],
                  "window": "ROLLING",
                  "key": "url.path+user.zuid"
                }
              ]
            },
            "extraparams": {
              "disable": true,
              "ignore": false
            },
            "authentication": {},
            "roles": [
              "AbuseAdmin"
            ],
            "allow-access-for": "devops"
          },
          "clan-group": "admin",
          "module-group": "admin",
          "apimethod": "com.zoho.desk.security.AbuseAdmin.AbuseAdminToolService.getPortalUsers"
        }
      }
    }
  },
  "components": {
    "parameters": {
      "portalInfoKey": {
        "name": "key",
        "in": "query",
        "description": "Based in key portal information is fetched",
        "required": true,
        "style": "form",
        "explode": true,
        "schema": {
          "type": ["string"],
          "description": "Based in key portal information is fetched",
          "enum": [
            "zgid",
            "userEmail",
            "zuid",
            "portalName",
            "domain"
          ]
        }
      },
      "portalInfoValue": {
        "name": "value",
        "in": "query",
        "description": "value against the portal information is fetched",
        "required": true,
        "style": "form",
        "explode": true,
        "schema": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "(^([a-zA-Z0-9\\s\\.\\?\\_\\-\\,\\@\\:/\\+\\(\\)])*$|null|undefined)"
        }
      },
      "from": {
        "name": "from",
        "in": "query",
        "description": "from index to fetch datas",
        "required": false,
        "style": "form",
        "explode": true,
        "schema": {
          "type": [
            "string",
            "null",
            "integer"
          ],
          "format": "int64",
          "pattern": "([0-9]+)"
        }
      },
      "zgid": {
        "name": "zgid",
        "in": "query",
        "description": "portal zgid",
        "required": true,
        "style": "form",
        "explode": true,
        "schema": {
          "type": [
            "string",
            "null",
            "integer"
          ],
          "format": "int64",
          "pattern": "([0-9]+)"
        }
      }
    },
    "responses": {
      "portalInfoResponse": {
        "description": "Portal information response",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/portalInfoArray"
            },
            "examples": {
              "Valid responses Definitions": {
                "value": [
                  {
                    "zgId": 75343267,
                    "portalName": "c10757",
                    "orgName": "Aeron Studio",
                    "userEmail": "user@test.com",
                    "orgId": 1
                  },
                  {
                    "zgId": 76335141,
                    "portalName": "c11320",
                    "orgName": "Pixel Creators",
                    "userEmail": "admin@test.in",
                    "orgId": 2
                  }
                ]
              }
            }
          }
        },
        "x-custom-response-attributes": {
          "headers": {
            "content-security-policy": "default-src 'none';report-uri ${report_uri}?service=support;report-to ${report_uri}?service=support",
            "content-type": "application/json"
          },
          "disable-safe-headers": []
        }
      },
      "LicenseInfoResponse": {
        "description": "getLicenseInfo template definitions",
        "content": {
          "application/json": {
            "schema": {"$ref":"#/components/schemas/LicenseInfo"},
            "examples": {
              "Valid responses Definitions": {
                "value": {
                  "planName": "Express",
                  "planStatus": "PAID",
                  "signUp-time": 1706138955000,
                  "ExpiryTime": 1757583402441,
                  "planCode": "EXP2022"
                }
             }
           }
          }
        },
          "x-custom-response-attributes": {
            "headers": {
              "content-security-policy": "default-src 'none';report-uri ${report_uri}?service=support;report-to ${report_uri}?service=support",
              "content-type": "application/json"
            },
            "disable-safe-headers": []
        }
      },
      "getOrgUserInfoResponse": {
        "description": "getOrgUserinfo template definitions",
        "content": {
          "application/json": {
            "schema": {
              "$ref":"#/components/schemas/userInfoArray"
            },
            "examples": {
              "Valid responses Definitions": {
                "value": [
                  {
                    "userStatus": "ACTIVE",
                    "userEmail": "test1@test.com",
                    "userName": "test1",
                    "zuid": "8231698"
                  },
                  {
                    "userStatus": "DELETED",
                    "userEmail": "test2@test.com",
                    "userName": "test2",
                    "zuid": ""
                  },
                  {
                    "userStatus": "DISABLED",
                    "userEmail": "test4@test.com",
                    "userName": "test4",
                    "zuid": "7996346"
                  },
                  {
                    "userStatus": "SYSTEM_ACTIVE",
                    "userEmail": "",
                    "userName": "DefaultSystem User",
                    "zuid": ""
                  },
                  {
                    "userStatus": "SYSTEM_ACTIVE",
                    "userEmail": "",
                    "userName": "Zia",
                    "zuid": ""
                  }
                ]
              }
            }
          }
        },
        "x-custom-response-attributes": {
          "headers": {
            "content-security-policy": "default-src 'none';report-uri ${report_uri}?service=support;report-to ${report_uri}?service=support",
            "content-type": "application/json"
          },
          "disable-safe-headers": []
        }
      }
    },
    "schemas": {
      "portalInfo": {
        "type": ["object"],
        "additionalProperties": false,
        "properties": {
          "zgId": {
            "type": ["string","integer"],
            "format": "int64",
            "pattern": "([0-9]+)"
          },
          "portalName": {
            "type": ["string"]
          },
          "domain": {
            "type": ["string"]
          },
          "favIcon": {
            "type": ["string"],
            "maxLength": 500,
            "minLength": 0,
            "pattern": "(^(ht|f)tp(s?)\\://[-.\\w]*(/?)([a-zA-Z0-9\\-\\.\\?\\,\\:\\'/\\\\+=&amp;%\\$#_@]*)?$)"
          },
          "isEnabled": {
            "type": ["boolean", "null"]
          },
          "primaryContact": {
            "type": ["string", "null"],
            "pattern": "^[a-zA-Z0-9\\_]([a-zA-Z0-9\\_\\+\\-\\.\\'\\&\\~]*)@(?=.{4,256}$)(([a-zA-Z0-9]+)(([\\-\\_]*[a-zA-Z0-9])*)[\\.])+[a-zA-Z]{2,22}$"
          }
        }
      },
      "portalInfoArray": {
        "type": ["null", "array"],
        "items": {
          "$ref": "#/components/schemas/portalInfo"
        }
      },
      "LicenseInfo": {
        "type": ["null", "object"],
        "additionalProperties": false,
        "properties": {
          "planName": {
            "type": ["string", "null"],
            "maxLength": 100,
            "minLength": 0
          },
          "planCode": {
            "type": ["string", "null"]
          },
          "planStatus": {
            "type": ["string", "null"
            ],
            "enum": ["PAID", "FREE", "TRIAL", "TRIAL_EXTENDED", "SUSPENDED"]
          },
          "signUp-time": {
            "type": ["string", "null", "integer"],
            "format": "int64",
            "pattern": "([0-9]+)"
          },
          "ExpiryTime": {
            "type": ["string", "null", "integer"],
            "format": "int64",
            "pattern": "([0-9]+)"
          }
        }
      },
      "userInfo": {
        "type": ["null", "object"],
        "additionalProperties": false,
        "properties": {
          "userName": {
            "type": ["string", "null"]
          },
          "userEmail": {
            "type": ["string", "null"],
            "pattern": "^[a-zA-Z0-9\\_]([a-zA-Z0-9\\_\\+\\-\\.\\'\\&\\~]*)@(?=.{4,256}$)(([a-zA-Z0-9]+)(([\\-\\_]*[a-zA-Z0-9])*)[\\.])+[a-zA-Z]{2,22}$"
          },
          "zuid": {
            "type": ["string", "null", "integer"],
            "format": "int64",
            "pattern": "([0-9]+)"
          },
          "userStatus": {
            "type": ["string", "null"],
            "enum": ["ACTIVE", "DISABLED", "DELETED", "SYSTEM_ACTIVE"]
          }
        }
      },
      "userInfoArray": {
        "type": ["null", "array"],
        "items": {
          "$ref": "#/components/schemas/userInfo"
        }
      }
    },
    "securitySchemes": {
      "cookie-auth": {
        "$ref": "../common/Common.json#/components/securitySchemes/cookie-auth"
      },
      "org-oauth": {
        "$ref": "../common/Common.json#/components/securitySchemes/org-oauth"
      },
      "iam-oauth2-schema": {
        "$ref": "../common/Common.json#/components/securitySchemes/iam-oauth2-schema"
      }
    }
  },
  "x-entity": "AdminTool"
}
